(function(e,t){function n(e){var t=n.options,r=t.parser[t.strictMode?"strict":"loose"].exec(e),i={},s=14;while(s--)i[t.key[s]]=r[s]||"";i[t.q.name]={};i[t.key[12]].replace(t.q.parser,function(e,n,r){if(n)i[t.q.name][n]=r});return i}n.options={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};e.dnnModal={load:function(){try{if(parent.location.href!==undefined){var e=parent;var t=e.parent;if(typeof t.$find!="undefined"){if(location.href.indexOf("popUp")==-1||e.location.href.indexOf("popUp")>-1){var n=e.jQuery("#iPopUp");var r=n.dialog("option","refresh");var i=n.dialog("option","closingUrl");var s=n.dialog("option","minWidth");var o=n.dialog("option","minHeight");var u=n.dialog("option","showReturn");if(!i){i=location.href}if(n.dialog("isOpen")===true){n.dialog("option",{close:function(e,t){dnnModal.refreshPopup({url:i,width:s,height:o,showReturn:u,refresh:r})}}).dialog("close")}}else{e.jQuery("#iPopUp").dialog({autoOpen:false,title:document.title})}}}return false}catch(a){return true}},show:function(r,i,s,o,u,a){var f=t("#iPopUp");if(f.length){f[0].src="about:blank";f.remove()}f=t('<iframe id="iPopUp" src="about:blank" scrolling="auto" frameborder="0"></iframe>');t(document.body).append(f);t(document).find("html").css("overflow","hidden");var l=document.styleSheets;var c=false;for(var h=0,p=l.length;h<p;h++){var d=l[h].href;if(typeof d=="string"&&d.indexOf("admin.css")>-1){c=true;break}}var v=!c&&(t(e).width()<601||"ontouchstart"in document.documentElement);if(v)t("html").addClass("mobileView");else t("html").removeClass("mobileView");var m=0;var g=function(){var e=t('<div class="dnnLoading"></div>');e.css({width:f.width(),height:f.height()});f.before(e)};var y=function(){f.prev(".dnnLoading").remove()};var b=function(){f.bind("load",function(){y();var t=document.getElementById("iPopUp");var i=e.location.hostname.toLowerCase();var s=e.location.port.toLowerCase();var o=n(r);var u=o.host.toLowerCase();var a=o.port.toLowerCase();u=u?u:i;a=a?a:s;var l=i===u&&s===a;if(l){try{if(v){var c=t.contentDocument.body,h=t.contentDocument.documentElement;h.style.width=m+"px";c.className+="mobileView dnnFormPopup dnnFormPopupMobileView";var p=Math.max(c.scrollHeight,c.offsetHeight,h.clientHeight,h.scrollHeight,h.offsetHeight);f.css("height",p+100).dialog("option","position","top")}t.contentWindow.dnnModal.show=function(e,t,n,r,i,s){var o=parent;var u=o.jQuery("#iPopUp");if(!s){s=location.href}if(u.dialog("isOpen")){u.dialog("option",{close:function(){parent.dnnModal.show(e,t,n,r,i,s)}}).dialog("close")}}}catch(d){}}});f[0].src=r};if(!v){f.dialog({modal:true,autoOpen:true,dialogClass:"dnnFormPopup",position:"center",minWidth:o,minHeight:s,maxWidth:1920,maxHeight:1080,resizable:true,closeOnEscape:true,refresh:u,showReturn:i,closingUrl:a,open:b,close:function(){e.dnnModal.closePopUp(u,a)}}).width(o-11).height(s-11);if(f.parent().find(".ui-dialog-title").next("a.dnnModalCtrl").length===0){var w=t('<a class="dnnModalCtrl"></a>');f.parent().find(".ui-dialog-titlebar-close").wrap(w);var E=t('<a href="#" class="dnnToggleMax"><span>Max</span></a>');f.parent().find(".ui-dialog-titlebar-close").before(E);E.click(function(n){n.preventDefault();var r=t(e),i,s;if(f.data("isMaximized")){i=f.data("height");s=f.data("width");f.data("isMaximized",false)}else{f.data("height",f.dialog("option","minHeight")).data("width",f.dialog("option","minWidth")).data("position",f.dialog("option","position"));i=r.height()-46;s=r.width()-40;f.data("isMaximized",true)}f.dialog({height:i,width:s});f.dialog({position:"center"})})}}else{m=t(e).width()-100;var S=t("body").css("height");f.dialog({modal:true,autoOpen:true,dialogClass:"dnnFormPopup dnnFormPopupMobileView",resizable:false,closeOnEscape:true,refresh:u,showReturn:i,closingUrl:a,position:"top",draggable:false,open:function(){t("#Form").hide();t("body").css("height","auto");f.parent().css({width:"auto",left:"0",right:"0",top:"0","box-shadow":"none"});e.scrollTo(0,0);b()},close:function(){t("#Form").show();if(S)t("body").css("height",S);e.scrollTo(0,0);e.dnnModal.closePopUp(u,a)}})}g();if(i.toString()==="true"){return false}},closePopUp:function(e,n){var r=parent;var i=r.jQuery("#iPopUp");if(typeof e==="undefined"||e==null){e=true}if(e.toString()=="true"){if(typeof n==="undefined"||n==""){n=r.location.href}r.location.href=n;i.hide()}else{i.dialog("option","close",null).dialog("close")}t(r.document).find("html").css("overflow","")},refreshPopup:function(e){var t=parent;var n=t.parent;if(t.location.href!==n.location.href&&t.location.href!==e.url){n.dnnModal.show(e.url,e.showReturn,e.height,e.width,e.refresh,e.closingUrl)}else{dnnModal.closePopUp(e.refresh,e.url)}}};e.dnnModal.load()})(window,jQuery)