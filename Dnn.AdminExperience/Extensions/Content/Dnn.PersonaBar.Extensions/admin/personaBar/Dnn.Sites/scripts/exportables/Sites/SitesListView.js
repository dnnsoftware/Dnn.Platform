!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="http://localhost:8050/dist/",n(n.s=16)}([function(t,e){t.exports=window.dnn.nodeModules.React},function(t,e){t.exports=window.dnn.nodeModules.CommonComponents},function(t,e,n){t.exports=n(9)()},function(t,e){t.exports=window.dnn.nodeModules.ReactRedux},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",o=t[3];if(!o)return n;if(e&&"function"==typeof btoa){var r=(i=o,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),a=o.sources.map(function(t){return"/*# sourceURL="+o.sourceRoot+t+" */"});return[n].concat(a).concat([r]).join("\n")}var i;return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var o={},r=0;r<this.length;r++){var a=this[r][0];"number"==typeof a&&(o[a]=!0)}for(r=0;r<t.length;r++){var i=t[r];"number"==typeof i[0]&&o[i[0]]||(n&&!i[2]?i[2]=n:n&&(i[2]="("+i[2]+") and ("+n+")"),e.push(i))}},e}},function(t,e,n){var o,r,a={},i=(o=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=o.apply(this,arguments)),r}),l=function(t){var e={};return function(t,n){if("function"==typeof t)return t();if(void 0===e[t]){var o=function(t,e){return e?e.querySelector(t):document.querySelector(t)}.call(this,t,n);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(t){o=null}e[t]=o}return e[t]}}(),c=null,s=0,p=[],u=n(12);function f(t,e){for(var n=0;n<t.length;n++){var o=t[n],r=a[o.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](o.parts[i]);for(;i<o.parts.length;i++)r.parts.push(v(o.parts[i],e))}else{var l=[];for(i=0;i<o.parts.length;i++)l.push(v(o.parts[i],e));a[o.id]={id:o.id,refs:1,parts:l}}}}function d(t,e){for(var n=[],o={},r=0;r<t.length;r++){var a=t[r],i=e.base?a[0]+e.base:a[0],l={css:a[1],media:a[2],sourceMap:a[3]};o[i]?o[i].parts.push(l):n.push(o[i]={id:i,parts:[l]})}return n}function g(t,e){var n=l(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var o=p[p.length-1];if("top"===t.insertAt)o?o.nextSibling?n.insertBefore(e,o.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),p.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=l(t.insertAt.before,n);n.insertBefore(e,r)}}function h(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=p.indexOf(t);e>=0&&p.splice(e,1)}function m(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var o=function(){0;return n.nc}();o&&(t.attrs.nonce=o)}return b(e,t.attrs),g(t,e),e}function b(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function v(t,e){var n,o,r,a;if(e.transform&&t.css){if(!(a="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=a}if(e.singleton){var i=s++;n=c||(c=m(e)),o=y.bind(null,n,i,!1),r=y.bind(null,n,i,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",b(e,t.attrs),g(t,e),e}(e),o=function(t,e,n){var o=n.css,r=n.sourceMap,a=void 0===e.convertToAbsoluteUrls&&r;(e.convertToAbsoluteUrls||a)&&(o=u(o));r&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var i=new Blob([o],{type:"text/css"}),l=t.href;t.href=URL.createObjectURL(i),l&&URL.revokeObjectURL(l)}.bind(null,n,e),r=function(){h(n),n.href&&URL.revokeObjectURL(n.href)}):(n=m(e),o=function(t,e){var n=e.css,o=e.media;o&&t.setAttribute("media",o);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),r=function(){h(n)});return o(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;o(t=e)}else r()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=i()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=d(t,e);return f(n,e),function(t){for(var o=[],r=0;r<n.length;r++){var i=n[r];(l=a[i.id]).refs--,o.push(l)}t&&f(d(t,e),e);for(r=0;r<o.length;r++){var l;if(0===(l=o[r]).refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete a[l.id]}}}};var E,x=(E=[],function(t,e){return E[t]=e,E.filter(Boolean).join("\n")});function y(t,e,n,o){var r=n?"":o.css;if(t.styleSheet)t.styleSheet.cssText=x(e,r);else{var a=document.createTextNode(r),i=t.childNodes;i[e]&&t.removeChild(i[e]),i.length?t.insertBefore(a,i[e]):t.appendChild(a)}}},function(t,e,n){var o=n(11);"string"==typeof o&&(o=[[t.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(5)(o,r);o.locals&&(t.exports=o.locals)},function(t,e){t.exports=window.dnn.nodeModules.Moment},function(t,e,n){var o=n(13);"string"==typeof o&&(o=[[t.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(5)(o,r);o.locals&&(t.exports=o.locals)},function(t,e,n){"use strict";var o=n(10);function r(){}t.exports=function(){function t(t,e,n,r,a,i){if(i!==o){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return n.checkPropTypes=r,n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){(e=t.exports=n(4)(!1)).push([t.i,"svg{fill:#C8C8C8}svg:hover{fill:#6F7273}svg:active{fill:#1E88C3}.VOZGLhchLWIgRIMdlmQVG{float:left;width:100%;box-sizing:border-box;border:1px solid #C8C8C8;padding:15px;margin-top:25px;background:#FFFFFF}.VOZGLhchLWIgRIMdlmQVG *{box-sizing:border-box}.VOZGLhchLWIgRIMdlmQVG .portal-main-info{border-right:1px solid #C8C8C8}.VOZGLhchLWIgRIMdlmQVG .portal-main-info .portal-name-info .dnn-text-overflow-wrapper{font-weight:bold;display:block;margin-bottom:5px}.VOZGLhchLWIgRIMdlmQVG .portal-main-info .portal-name-info a{color:#1E88C3;max-width:100%;word-wrap:break-word;display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.VOZGLhchLWIgRIMdlmQVG .portal-main-info:hover .icon-container>div svg{fill:#C8C8C8}.VOZGLhchLWIgRIMdlmQVG .portal-main-info:hover .icon-container>div svg:hover{fill:#6F7273}.VOZGLhchLWIgRIMdlmQVG .portal-main-info:hover .icon-container>div svg:active{fill:#1E88C3}.VOZGLhchLWIgRIMdlmQVG .portal-main-info .icon-container{margin-top:10px}.VOZGLhchLWIgRIMdlmQVG .portal-main-info .icon-container>div{display:inline;margin-right:10px}.VOZGLhchLWIgRIMdlmQVG .portal-main-info .icon-container>div svg{cursor:pointer;width:20px;height:20px;fill:white}.VOZGLhchLWIgRIMdlmQVG .portal-statistics-info{padding:0 15px}.VOZGLhchLWIgRIMdlmQVG .portal-statistics-info .portal-statistic{float:left;width:50%}.VOZGLhchLWIgRIMdlmQVG .portal-statistics-info .portal-statistic .statistic-label{padding:0 15px;float:left;width:100%;margin-bottom:5px}.VOZGLhchLWIgRIMdlmQVG .portal-statistics-info .portal-statistic .statistic-label p span{float:right;margin-right:24px}",""]),e.locals={portalListItem:"VOZGLhchLWIgRIMdlmQVG"}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,o=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var r,a=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(a)?t:(r=0===a.indexOf("//")?a:0===a.indexOf("/")?n+a:o+a.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")})}},function(t,e,n){(e=t.exports=n(4)(!1)).push([t.i,"svg{fill:#C8C8C8}svg:hover{fill:#6F7273}svg:active{fill:#1E88C3}.mKGNTUYco7qjKwW4ii19_{display:block;width:100%;box-sizing:border-box}.mKGNTUYco7qjKwW4ii19_ .portal-list-container{transition:.5s;opacity:1}.mKGNTUYco7qjKwW4ii19_ .portal-list-container.hidden{opacity:0}",""]),e.locals={siteList:"mKGNTUYco7qjKwW4ii19_"}},function(t,e,n){var o=n(15);"string"==typeof o&&(o=[[t.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(5)(o,r);o.locals&&(t.exports=o.locals)},function(t,e,n){(t.exports=n(4)(!1)).push([t.i,"svg{fill:#C8C8C8}svg:hover{fill:#6F7273}svg:active{fill:#1E88C3}.export-portal{float:left}.export-portal .export-site-container{padding:50px 35px}.export-portal .export-site-container .dnn-single-line-input-with-error,.export-portal .export-site-container .dnn-multi-line-input-with-error{width:100%}.export-portal .export-site-container .portal-description .dnn-ui-common-multi-line-input{height:130px;overflow:auto}.export-portal .export-site-container .site-template-box{margin-top:25px}.export-portal .export-site-container .site-template-box .dnn-label{display:block;width:100%}.export-portal .export-site-container .site-thumbnails-container{width:100%}.export-portal .export-site-container .site-thumbnails-container .dnn-dropdown-with-error{width:100%;margin-top:25px;margin-bottom:35px}.export-portal .export-site-container .site-type-container{margin-top:25px}.export-portal .export-site-container .site-type-container .dnn-radio-buttons{padding-top:6px}.export-portal .export-site-container .site-type-container .dnn-radio-buttons>label{margin-right:25px}.export-portal .export-site-container .site-type-container .dnn-radio-buttons ul li label{float:left}.export-portal .export-site-container .site-type-container .home-directory .dnn-label{width:40%;margin-right:0}.export-portal .export-site-container .site-type-container .home-directory .dnn-label>label{font-size:15px}.export-portal .export-site-container .site-type-container .home-directory .input-tooltip-container{width:60%}.export-portal .export-site-container .site-type-container #home-directory{width:100%}.export-portal .export-site-container .export-switches{margin-top:25px;border-right:1px solid #C8C8C8;padding-right:35px}.export-portal .export-site-container .export-switches .dnn-switch-container{width:100%;margin-top:15px}.export-portal .export-site-container .export-switches .dnn-switch-container .switch-label{width:calc(100% - 45px)}.export-portal .export-site-container .export-switches .dnn-switch-container .dnn-switch{float:right}.export-portal .export-site-container .export-pages{float:left;margin-top:25px;margin-left:35px;box-sizing:border-box}.export-portal .export-site-container .export-pages .dnn-label{margin-bottom:5px;font-weight:bold}.export-portal .export-site-container .export-pages .dnn-label .dnn-ui-common-tooltip{font-weight:normal}.export-portal .export-site-container .export-pages .dnn-dropdown{width:300px;margin-bottom:15px}.export-portal .export-site-container .export-pages .language-box{float:left;width:100%;height:70px}.export-portal .export-site-container .export-pages .dnn-checkbox-container{float:left}.export-portal .export-site-container .export-pages .dnn-checkbox-container .checkbox{margin-bottom:2px}.export-portal .export-site-container .export-pages .dnn-label{float:left}.export-portal .export-site-container .export-pages .dnn-label label{float:left}.export-portal .export-site-container .export-pages .dnn-dropdown .collapsible-content ul li{display:-webkit-box}.export-portal .export-site-container .export-pages .dnn-dropdown .collapsible-content ul li .dnn-ui-common-tooltip{float:left}.export-portal .export-site-container .export-pages div.tooltip-text{max-width:250px}.export-portal .export-site-container .site-action-buttons{text-align:center;margin-top:25px}.export-portal .export-site-container .site-action-buttons .dnn-ui-common-button{margin-right:10px}#notification-dialog{overflow-wrap:break-word}",""])},function(t,e,n){"use strict";n.r(e);var o={};n.r(o),n.d(o,"portal",function(){return v}),n.d(o,"visiblePanel",function(){return E}),n.d(o,"pagination",function(){return x});var r={};n.r(r),n.d(r,"CommonPortalListActions",function(){return C}),n.d(r,"CommonExportPortalActions",function(){return w}),n.d(r,"CommonVisiblePanelActions",function(){return S}),n.d(r,"CommonPaginationActions",function(){return R});var a={};n.r(a),n.d(a,"ListView",function(){return G}),n.d(a,"ExportPortal",function(){return J});var i={};n.r(i),n.d(i,"portal",function(){return ot}),n.d(i,"exportPortal",function(){return lt}),n.d(i,"visiblePanel",function(){return ut}),n.d(i,"pagination",function(){return ht});n(2);var l=n(0),c=n.n(l),s=n(3),p=n(1),u=function(t){var e=t.label,n=t.portalAliases;return c.a.createElement(p.GridCell,{className:"portal-name-info"},c.a.createElement(p.TextOverflowWrapper,{text:e,maxWidth:220}),c.a.createElement(p.GridCell,null,n.map(function(t){return c.a.createElement(p.TextOverflowWrapper,{key:"alias-"+e,href:t.link,target:"_blank",text:t.url,isAnchor:!0,maxWidth:220})})))},f=function(t){var e=t.label,n=t.value;return c.a.createElement("div",{className:"portal-statistic"},c.a.createElement("div",{className:"statistic-label"},c.a.createElement("p",null,e,": ",c.a.createElement("span",null,n))))},d=n(6),g=n.n(d),h=function(t){var e=t.portal,n=t.portalStatisticInfo,o=t.portalButtons;return c.a.createElement(p.GridCell,{className:g.a.portalListItem},c.a.createElement(p.GridCell,{className:"portal-info-container"},c.a.createElement(p.GridCell,{className:"portal-main-info",columnSize:35},c.a.createElement(u,{label:e.PortalName,portalAliases:e.PortalAliases}),c.a.createElement(p.GridCell,{className:"icon-container"},o)),c.a.createElement(p.GridCell,{className:"portal-statistics-info",columnSize:65},n.map(function(t){return c.a.createElement(f,{key:"stat-"+t.label,label:t.label,value:t.value})}))))},m=Object.assign({},window.dnn.utility),b={get:function(t){return m.getResx("Sites",t)}},v={RETRIEVED_PORTALS:"RETRIEVED_PORTALS",RETRIEVED_PORTALS_CONCAT:"RETRIEVED_PORTALS_CONCAT",UPDATE_PORTAL_PARAMETER:"UPDATE_PORTAL_PARAMETER",RETRIEVED_PORTAL_TEMPLATES:"RETRIEVED_PORTAL_TEMPLATES",RETRIEVED_PORTAL_TABS_DESCENDANTS:"RETRIEVED_PORTAL_TABS_DESCENDANTS",RETRIEVED_PORTAL_TABS:"RETRIEVED_PORTAL_TABS",CREATED_PORTAL:"CREATED_PORTAL",DELETED_PORTAL:"DELETED_PORTAL",EXPORTED_PORTAL_TEMPLATE:"EXPORTED_PORTAL_TEMPLATE",SET_PORTAL_BEING_EXPORTED:"SET_PORTAL_BEING_EXPORTED"},E={SELECT_PANEL:"SELECT_PANEL"},x={LOAD_MORE:"LOAD_MORE"};function y(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var P=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,o;return e=t,(n=[{key:"getServiceFramework",value:function(t){var e=m.sf;return e.moduleRoot="PersonaBar",e.controller=t,e}},{key:"getPortalLocales",value:function(t,e,n){this.getServiceFramework("Sites").get("GetPortalLocales?portalId="+t,{},e,n)}},{key:"deletePortal",value:function(t,e,n){this.getServiceFramework("Sites").post("DeletePortal?portalId="+t,{},e,n)}},{key:"exportPortal",value:function(t,e,n){this.getServiceFramework("Sites").post("ExportPortalTemplate",t,e,n)}},{key:"getPortalTemplates",value:function(t,e){this.getServiceFramework("Sites").get("GetPortalTemplates",{},t,e)}},{key:"createPortal",value:function(t,e,n){this.getServiceFramework("Sites").post("CreatePortal",t,e,n)}},{key:"getPortals",value:function(t,e,n){this.getServiceFramework("Sites").get("GetPortals?"+function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")}(t),{},e,n)}}])&&y(e.prototype,n),o&&y(e,o),t}());function T(t){m.notifyError(JSON.parse(t.responseText).Message,5e3)}var w={getPortalLocales:function(t,e){return function(){P.getPortalLocales(t,function(t){e&&e(t)},T)}},exportPortal:function(t,e){return function(n){P.exportPortal(t,function(t){n({type:v.EXPORTED_PORTAL_TEMPLATE,payload:{Message:t.Message,Template:t.Template}}),e&&e(t)},T)}},setPortalBeingExported:function(t,e){return function(n){n({type:v.SET_PORTAL_BEING_EXPORTED,payload:t}),m.throttleExecution(e)}}};function O(t){m.notifyError(JSON.parse(t.responseText).Message,5e3)}var C={deletePortal:function(t,e,n){return function(o){P.deletePortal(t,function(r){o({type:v.DELETED_PORTAL,payload:{index:e,portalId:t}}),n&&n(r)},O)}},getPortalTemplates:function(t){return function(e){P.getPortalTemplates(function(n){e({type:v.RETRIEVED_PORTAL_TEMPLATES,payload:{templates:n.Results.Templates,totalCount:n.TotalResults}}),t&&t(n)},O)}},createPortal:function(t,e,n){return function(o){P.createPortal(t,function(t){o({type:v.CREATED_PORTAL,payload:{Portal:t.Portal,ErrorMessage:t.ErrorMessage}}),e&&e(t)},function(t){O(t),n&&n(t)})}},loadPortals:function(t,e,n){return function(o){P.getPortals(t,function(t){o(e?{type:v.RETRIEVED_PORTALS_CONCAT,payload:{portals:t.Results,totalCount:t.TotalResults}}:{type:v.RETRIEVED_PORTALS,payload:{portals:t.Results,totalCount:t.TotalResults}}),n&&n(t)},O)}}},S={selectPanel:function(t){return function(e){e({type:E.SELECT_PANEL,payload:{selectedPage:t}})}}},R={loadMore:function(t){return function(e){e({type:x.LOAD_MORE}),t&&m.throttleExecution(t)}}},L=n(7),I=n.n(L),_=n(8),D=n.n(_);function A(t){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M(){return(M=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)}function k(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function j(t,e){return!e||"object"!==A(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function B(t){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function N(t,e){return(N=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var V=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),j(this,B(e).call(this))}var n,o,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&N(t,e)}(e,l["Component"]),n=e,(o=[{key:"onDelete",value:function(t,e){var n=this.props;m.confirm(b.get("deletePortal").replace("{0}",t.PortalName),b.get("ConfirmPortalDelete"),b.get("CancelPortalDelete"),function(){n.dispatch(C.deletePortal(t.PortalID,e))})}},{key:"backToSites",value:function(){m.loadPanel(this.props.sitesModule,{})}},{key:"onSetting",value:function(t){var e=document.createEvent("Event");e.initEvent("portalIdChanged",!0,!0);var n=document.createEvent("Event");n.initEvent("reloadPortalList",!0,!0);var o={portalId:t.PortalID,referrer:this.props.sitesModule,referrerText:b.get("BackToSites"),backToReferrerFunc:this.backToSites.bind(this),isHost:!0};e=M(e,o),m.loadPanel(this.props.siteSettingModule,{settings:o}),document.dispatchEvent(e),document.dispatchEvent(n)}},{key:"onPreview",value:function(t){t.PortalAliases&&t.PortalAliases.length>0&&window.open(t.PortalAliases[0].link)}},{key:"navigateMap",value:function(t){this.props.dispatch(S.selectPanel(t))}},{key:"onImportExport",value:function(t,e){var n=document.createEvent("Event");n.initEvent("siteImportExport",!0,!0);var o={importExportJob:{portalId:t.PortalID,portalName:t.PortalName,jobType:e},referrer:this.props.sitesModule,referrerText:b.get("BackToSites"),backToReferrerFunc:this.backToSites.bind(this)};n=M(n,o),m.loadPanel(this.props.siteImportExportModule,{settings:o}),document.dispatchEvent(n)}},{key:"getPortalButtons",value:function(t,e){var n=[{icon:p.SvgIcons.PreviewIcon,onClick:this.onPreview.bind(this,t,e),title:b.get("ViewSite")},{icon:p.SvgIcons.SettingsIcon,onClick:this.onSetting.bind(this,t,e),title:b.get("SiteSettings")},{icon:p.SvgIcons.UploadIcon,onClick:this.onImportExport.bind(this,t,"Export",e),title:b.get("SiteExport")},{icon:p.SvgIcons.DownloadIcon,onClick:this.onImportExport.bind(this,t,"Import",e),title:b.get("SiteImport")}];t.allowDelete&&(n=n.concat([{icon:p.SvgIcons.TrashIcon,onClick:this.onDelete.bind(this,t,e),title:b.get("DeleteSite")}]));var o=0;return n.map(function(t){var e=c.a.createElement("div",{key:"portalButton_".concat(o),dangerouslySetInnerHTML:{__html:t.icon},title:t.title,onClick:t.onClick});return o++,e})}},{key:"getPortalMapping",value:function(t){return[{label:b.get("SiteDetails_SiteID"),value:t.PortalID},{label:b.get("SiteDetails_Users"),value:t.Users},{label:b.get("SiteDetails_Updated"),value:I()(t.LastModifiedOnDate).locale(this.props.culture).fromNow()},{label:b.get("SiteDetails_Pages"),value:t.Pages}].concat(this.props.getPortalMapping&&this.props.getPortalMapping(t)||[])}},{key:"getDetailList",value:function(){var t=this;return this.props.portals.map(function(e,n){return e.PortalAliases&&c.a.createElement(h,{key:"portal-"+e.PortalID,portal:e,portalButtons:t.getPortalButtons(e,n),portalStatisticInfo:t.getPortalMapping(e)})})}},{key:"cancelExport",value:function(t){void 0!==t&&t.preventDefault(),this.setState({portalBeingExported:{}}),this.navigateMap(0)}},{key:"render",value:function(){var t=this.getDetailList(),e=this.props;return c.a.createElement(p.GridCell,{className:D.a.siteList},c.a.createElement(p.GridCell,{className:"portal-list-container "+e.className},t))}}])&&k(n.prototype,o),r&&k(n,r),e}();V.defaultProps={siteSettingModule:"Dnn.SiteSettings",sitesModule:"Dnn.Sites",siteImportExportModule:"Dnn.SiteImportExport",culture:"en-US"};var G=Object(s.connect)(function(t){return{portals:t.portal.portals,totalCount:t.portal.totalCount}})(V),U={format:function(){var t=arguments[0],e=arguments;return t.replace(/{(\d+)}/gi,function(t,n){var o=parseInt(n)+1;return e[o]})}};n(14);function F(t){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function W(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function z(t,e){return!e||"object"!==F(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function H(t){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Q(t,e){return(Q=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Z={fileName:"",description:"",portalId:-1,pages:[],locales:[],isMultiLanguage:!1,includeContent:!1,includeFiles:!1,includeRoles:!0,includeProfile:!0,includeModules:!0,localizationCulture:"en-US"},q={width:"100%",height:200,marginTop:0,border:"1px solid #c8c8c8"},K=["fileName","description"],X=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=z(this,H(e).call(this))).state={localData:{locales:[],errors:{fileName:!1,description:!1}},portalBeingExported:Z,reloadPages:!1},t}var n,o,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Q(t,e)}(e,l["Component"]),n=e,(o=[{key:"componentWillMount",value:function(){var t=this,e=this.props;e.dispatch(w.getPortalLocales(e.portalBeingExported.PortalID,function(n){var o=t.state.portalBeingExported,r=t.state.localData;o.portalId=e.portalBeingExported.PortalID,o.portalName=e.portalBeingExported.PortalName,r.locales=n.Results,o.locales=n.Results.map(function(t){return t.Code}),o.isMultiLanguage=e.portalBeingExported.contentLocalizable,o.localizationCulture=e.portalBeingExported.DefaultLanguage,t.setState({portalBeingExported:o,localData:r})}))}},{key:"onChange",value:function(t,e){var n="object"===F(e)?e.target.value:e,o=this.state.portalBeingExported;o[t]=n,this.setState({portalBeingExported:o}),K.some(function(e){return e==t})&&this.ValidateTexts(t)}},{key:"onExportPortal",value:function(){var t=this,e=this.props,n=this.state;this.Validate()&&e.dispatch(w.exportPortal(n.portalBeingExported,function(o){m.notify(o.Message);var r=n.portalBeingExported;r.fileName="",r.description="",t.setState({portalBeingExported:r},function(){e.onCancel()})}))}},{key:"Validate",value:function(){var t=!0,e=this.state.portalBeingExported;return(t=this.ValidateTexts())&&e.pages.length<=0&&(t=!1,m.notify(b.get("ErrorPages"))),t}},{key:"ValidateTexts",value:function(t){var e=this,n=!0,o=this.state.portalBeingExported,r=this.state.localData;return K.map(function(a){void 0!==t&&t!=a||(""===o[a]?(n=!1,r.errors[a]=!0):r.errors[a]=!1),e.setState({})}),n}},{key:"onLanguageSelectionChange",value:function(t){var e=this,n=this.state.portalBeingExported;this.state.reloadPages;n.localizationCulture=t.value,this.setState({portalBeingExported:n,reloadPages:!0},function(){e.setState({reloadPages:!1})})}},{key:"createLocaleOptions",value:function(t){return this.state.localData.locales.map(function(t){return{label:t.EnglishName,value:t.Code}})}},{key:"onLanguageCheckBoxChange",value:function(t,e){var n=this.state.portalBeingExported;e&&!n.locales.some(function(e){return e===t})?n.locales=n.locales.concat([t]):!e&&n.locales.some(function(e){return e===t})&&(n.locales=n.locales.filter(function(e){return e!==t})),this.setState({portalBeingExported:n})}},{key:"createLanguageDropDownOptions",value:function(){var t=this,e=this.state;return e.localData.locales.map(function(n){return{label:c.a.createElement("div",null,c.a.createElement(p.Checkbox,{label:n.EnglishName,value:e.portalBeingExported.locales.some(function(t){return t===n.Code}),onChange:t.onLanguageCheckBoxChange.bind(t,n.Code),enabled:t.props.portalBeingExported.DefaultLanguage!==n.Code}),n.Code===e.portalBeingExported.localizationCulture&&c.a.createElement(p.Tooltip,{messages:[U.format(b.get("lblNote"),n.EnglishName)]})),value:n.Code}})}},{key:"updatePagesToExport",value:function(t){var e=this.state.portalBeingExported;e.pages=t,this.setState({portalBeingExported:e})}},{key:"render",value:function(){var t=this.props,e=this.state,n=this.createLocaleOptions(),o=this.createLanguageDropDownOptions(),r={portalId:t.portalBeingExported.PortalID,cultureCode:e.portalBeingExported.localizationCulture,isMultiLanguage:e.portalBeingExported.isMultiLanguage,excludeAdminTabs:!0,disabledNotSelectable:!1,roles:"",sortOrder:0};return c.a.createElement(p.GridCell,{className:"export-portal-container"},c.a.createElement(p.PersonaBarPageHeader,{title:b.get("ControlTitle_template")}),c.a.createElement(p.PersonaBarPageBody,{backToLinkProps:{text:b.get("BackToSites"),onClick:t.onCancel.bind(this)}},c.a.createElement("div",{className:"export-portal"},c.a.createElement(p.GridCell,{className:"export-site-container"},c.a.createElement("h3",{className:"site-template-info-title"},b.get("titleTemplateInfo")),c.a.createElement(p.GridCell,null,c.a.createElement(p.SingleLineInputWithError,{label:b.get("plPortals"),tooltipMessage:b.get("plPortals.Help"),enabled:!1,value:e.portalBeingExported.portalName,error:!1})),c.a.createElement(p.GridCell,null,c.a.createElement(p.SingleLineInputWithError,{label:b.get("plTemplateName")+"*",tooltipMessage:b.get("plTemplateName.Help"),onChange:this.onChange.bind(this,"fileName"),error:e.localData.errors.fileName,errorMessage:b.get("valFileName.ErrorMessage"),value:e.portalBeingExported.fileName})),c.a.createElement(p.GridCell,null,c.a.createElement(p.MultiLineInputWithError,{label:b.get("plDescription")+"*",tooltipMessage:b.get("plDescription.Help"),className:"portal-description",onChange:this.onChange.bind(this,"description"),error:e.localData.errors.description,errorMessage:b.get("valDescription.ErrorMessage"),value:e.portalBeingExported.description}),c.a.createElement("hr",null)),c.a.createElement(p.GridSystem,null,c.a.createElement("div",{className:"export-switches"},c.a.createElement(p.Switch,{label:b.get("plContent"),onText:b.get("SwitchOn"),offText:b.get("SwitchOff"),tooltipMessage:b.get("plContent.Help"),value:e.portalBeingExported.includeContent,onChange:this.onChange.bind(this,"includeContent")}),c.a.createElement(p.Switch,{label:b.get("lblFiles"),onText:b.get("SwitchOn"),offText:b.get("SwitchOff"),tooltipMessage:b.get("lblFiles.Help"),value:e.portalBeingExported.includeFiles,onChange:this.onChange.bind(this,"includeFiles")}),c.a.createElement(p.Switch,{label:b.get("lblRoles"),onText:b.get("SwitchOn"),offText:b.get("SwitchOff"),tooltipMessage:b.get("lblRoles.Help"),value:e.portalBeingExported.includeRoles,onChange:this.onChange.bind(this,"includeRoles")}),c.a.createElement(p.Switch,{label:b.get("lblProfile"),onText:b.get("SwitchOn"),offText:b.get("SwitchOff"),tooltipMessage:b.get("lblProfile.Help"),value:e.portalBeingExported.includeProfile,onChange:this.onChange.bind(this,"includeProfile")}),c.a.createElement(p.Switch,{label:b.get("lblModules"),onText:b.get("SwitchOn"),offText:b.get("SwitchOff"),tooltipMessage:b.get("lblModules.Help"),value:e.portalBeingExported.includeModules,onChange:this.onChange.bind(this,"includeModules")}),t.portalBeingExported.contentLocalizable&&c.a.createElement(p.Switch,{label:b.get("lblMultilanguage"),onText:b.get("SwitchOn"),offText:b.get("SwitchOff"),tooltipMessage:b.get("lblMultilanguage.Help"),value:e.portalBeingExported.isMultiLanguage,onChange:this.onChange.bind(this,"isMultiLanguage")})),e.portalBeingExported.portalId>=0&&c.a.createElement("div",{className:"export-pages"},t.portalBeingExported.contentLocalizable&&c.a.createElement("div",{className:"language-box"},c.a.createElement(p.Label,{label:b.get("lblLanguages"),tooltipMessage:b.get("lblLanguages.Help")}),!e.portalBeingExported.isMultiLanguage&&c.a.createElement(p.Dropdown,{options:n,value:e.portalBeingExported.localizationCulture,onSelect:this.onLanguageSelectionChange.bind(this)}),e.portalBeingExported.isMultiLanguage&&c.a.createElement(p.Dropdown,{options:o,label:b.get("lblSelectLanguages"),closeOnClick:!1})),c.a.createElement(p.Label,{label:b.get("lblPages"),tooltipMessage:b.get("lblPages.Help")}),c.a.createElement(p.PagePicker,{serviceFramework:m&&m.sf,PortalTabsParameters:r,scrollAreaStyle:q,OnSelect:this.updatePagesToExport.bind(this),allSelected:!0,IsMultiSelect:!0,IsInDropDown:!1,ShowCount:!1,Reload:this.state.reloadPages,ShowIcon:!1}))),c.a.createElement(p.GridCell,{className:"site-action-buttons"},c.a.createElement(p.Button,{type:"secondary",onClick:t.onCancel.bind(this)},b.get("cmdCancel")),c.a.createElement(p.Button,{type:"primary",onClick:this.onExportPortal.bind(this)},b.get("cmdExport")))))))}}])&&W(n.prototype,o),r&&W(n,r),e}();var J=Object(s.connect)(function(t){return{portalBeingExported:t.exportPortal.portalBeingExported}})(X);function Y(t,e){var n=t;return"[object Array]"===Object.prototype.toString.call(e)&&e.forEach(function(t){var e=!1,o=0;n.forEach(function(n,r){t.condition===n.condition&&(e=!0,o=r)}),e?n[o]=t:n.push(t)}),n}function $(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tt(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function et(){return(et=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)}var nt=[{condition:v.RETRIEVED_PORTALS,functionToRun:function(t,e){return{portals:e.payload.portals,totalCount:e.payload.totalCount}}},{condition:v.DELETED_PORTAL,functionToRun:function(t,e){var n=et(t.totalCount);return{portals:tt(t.portals.slice(0,e.payload.index)).concat(tt(t.portals.slice(e.payload.index+1))),totalCount:n-1}}},{condition:v.RETRIEVED_PORTALS_CONCAT,functionToRun:function(t,e){return{portals:t.portals.concat(e.payload.portals),totalCount:e.payload.totalCount}}},{condition:v.CREATED_PORTAL,functionToRun:function(t,e){var n=et([],m.getObjectCopy(t.portals)),o=et(t.totalCount);return{portals:function(t,e){if(t.some(function(t){return t.PortalID===e.PortalID})&&(t=t.filter(function(t){return t.PortalID!==e.PortalID})),!t.some(function(t){return t.PortalID===e.PortalID}))return t=(t=[e].concat(t)).sort(function(t,e){var n=t.PortalID,o=e.PortalID;return n<o?-1:n>o?1:0})}(n,e.payload.Portal),totalCount:o+1}}},{condition:v.UPDATE_PORTAL_PARAMETER,functionToRun:function(t,e){var n=et([],m.getObjectCopy(t.portals)),o=et(t.totalCount),r=n.find(function(t){return t.PortalID===e.payload.portalId});return r&&(r[e.payload.name]=e.payload.value),{portals:n,totalCount:o}}}];function ot(t,e){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et({portals:[],totalCount:0},t),o=arguments.length>1?arguments[1]:void 0,r=Y(nt,e),a=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){$(t,e,n[e])})}return t}({},n);return r.forEach(function(t){if(t.condition===o.type){var e=t.functionToRun(n,o);a=et(a,e)}}),a}}function rt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function at(){return(at=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)}var it=[{condition:v.SET_PORTAL_BEING_EXPORTED,functionToRun:function(t,e){return{portalBeingExported:e.payload}}},{condition:v.RETRIEVED_PORTAL_TEMPLATES,functionToRun:function(t,e){return{templates:e.payload.templates,totalTemplateCount:e.payload.totalCount}}},{condition:v.EXPORTED_PORTAL_TEMPLATE,functionToRun:function(t,e){var n=at([],m.getObjectCopy(t.templates)),o=at(t.totalTemplateCount);return{templates:function(t,e){if(t.some(function(t){return t.Value===e.Value})&&(t=t.filter(function(t){return t.Value!==e.Value})),!t.some(function(t){return t.Value===e.Value}))return t=(t=[e].concat(t)).sort(function(t,e){var n=t.Name,o=e.Name;return n<o?-1:n>o?1:0})}(n,e.payload.Template),totalTemplateCount:o+1}}}];function lt(t,e){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at({templates:[],totalTemplateCount:0,portalBeingExported:{}},t),o=arguments.length>1?arguments[1]:void 0,r=Y(it,e),a=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){rt(t,e,n[e])})}return t}({},n);return r.forEach(function(t){if(t.condition===o.type){var e=t.functionToRun(n,o);a=at(a,e)}}),a}}function ct(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function st(){return(st=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)}var pt=[{condition:E.SELECT_PANEL,functionToRun:function(t,e){return{selectedPage:e.payload.selectedPage}}}];function ut(t,e){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st({selectedPage:0},t),o=arguments.length>1?arguments[1]:void 0,r=Y(pt,e),a=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){ct(t,e,n[e])})}return t}({},n);return r.forEach(function(t){if(t.condition===o.type){var e=t.functionToRun(n,o);a=st(a,e)}}),a}}function ft(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dt(){return(dt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)}var gt=[{condition:x.LOAD_MORE,functionToRun:function(t){return{pageIndex:t.pageIndex+1}}}];function ht(t,e){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt({pageIndex:0,pageSize:10,portalGroupId:-1,filter:""},t),o=arguments.length>1?arguments[1]:void 0,r=Y(gt,e),a=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){ft(t,e,n[e])})}return t}({},n);return r.forEach(function(t){if(t.condition===o.type){var e=t.functionToRun(n,o);a=dt(a,e)}}),a}}window.dnn||(window.dnn={}),window.dnn.Sites||(window.dnn.Sites={}),window.dnn.Sites.CommonActionTypes=o,window.dnn.Sites.CommonComponents=a,window.dnn.Sites.CommonReducers=i,window.dnn.Sites.CommonActions=r}]);